<div id="add-choice">
    <div ng-if="user.loaded">
        <div class="close" ng-click="$root.$broadcast('addChoice:close')">&times;</div>
        <h1 ng-if="!story">Add Choice</h1>
        <h1 ng-if="story">New Story</h1>
        <br/>
        <form class="form" ng-submit="addChoice()">
            <div class="form-group">
                <label class="pull-right" ng-class="{'text-info': acCtrl.action.length < params.maxTitle, 'text-warning': acCtrl.action.length == params.maxTitle, 'hide': !acCtrl.action.length}">{{acCtrl.action.length || 0}} / {{params.maxTitle}}</label>
                <label ng-if="!story">Choice Text</label>
                <label ng-if="story">Title</label>
                <input required ng-model="acCtrl.action" class="form-control" type="text" ng-trim="false" ng-maxlength="params.maxTitle" />
            </div>
            <div class="form-group">
                <label class="pull-right" ng-class="{'text-info': acCtrl.text.length < params.maxPage, 'text-warning': acCtrl.text.length == params.maxPage, 'hide': !acCtrl.text.length}">{{acCtrl.text.length || 0}} / {{params.maxPage}}</label>
                <label ng-if="!story">What Happens Next?</label>
                <label ng-if="story">First Page</label>
                <textarea required ng-model="acCtrl.text" class="form-control" rows="6" ng-maxlength="params.maxPage"></textarea>
            </div>
            <div class="form-group">
                <label>
                    <input type="checkbox" ng-model="acCtrl.endMeme" /> End on a meme?
                </label>
            </div>
            <div class="form-group meme-maker" ng-if="acCtrl.endMeme">
                <div class="row text-center">
                    <div style="height: 30vh; overflow-y:scroll" ng-class="{ 'col-xs-6' : acCtrl.background, 'col-xs-12': !acCtrl.background}">
                        <h4>Select Background...</h4>
                        <div class="thumbnail col-xs-4 col-sm-3 col-md-3 col-lg-2 meme-thumb-holder" ng-click="acCtrl.loadBackground(img)" ng-repeat="img in acCtrl.memes">
                            <div class="img img-responsive meme-thumb" ng-style="{background: 'url(\'images/meme_tn/'+img+'_tn.jpg\') center center no-repeat'} ">
                                <!--                                 <div class="caption">
                                    <p>{{img}}</p>
                                </div> -->
                            </div>
                        </div>
                    </div>
                    <div ng-class="{ 'col-xs-6' : acCtrl.background, 'hide': !acCtrl.background}">
                        <div ng-if="acCtrl.background">
                            <div class="form-group" ng-if="!pending && acCtrl.background">
                                <input class="form-control" type="text" placeholder="Top Text" ng-maxlength="params.maxTitle" ng-model="acCtrl.topMeme" />
                            </div>
                            <div class="meme-viewer animated fadeIn">
                            <div class="thumbnail meme-holder">
                                <fit-text data-value="acCtrl.topMeme" class="meme-text meme-text-top"></fit-text>
                                <img class="img-responsive" ng-src="{{acCtrl.background}}" />
                                <fit-text data-value="acCtrl.bottomMeme" class="meme-text meme-text-bottom"></fit-text>
                            </div>
                        </div>
                            <div class="form-group" ng-if="!pending && acCtrl.background">
                                <input class="form-control" type="text" placeholder="Bottom Text" ng-maxlength="params.maxTitle" ng-model="acCtrl.bottomMeme" />
                            </div>
                        </div>
                        <div ng-if="!acCtrl.background" class="well">
                            <h4>Select an Image&hellip;</h4>
                        </div>
                    </div>
                </div>
            </div>
            <button ng-disabled="sending" type="submit" class="btn btn-lg btn-success btn-block">
                <i class="fa fa-plus button-icon" aria-hidden="true"></i> Add Choice
            </button>
        </form>
    </div>
    <div ng-if="!user.loaded">
        <br/>
        <h3>Identify Yourself:</h3>
        <div id="firebaseui-auth-container"></div>
    </div>
</div>
